<!DOCTYPE html>
<!--
 * Copyright 2013 Research In Motion Limited.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Virtual Keyboard Extension Test</title>
<style>
body {
  color: #900;
  font-weight: bold;
  font-size: 38px;
  text-align: center;
}

input {
  color: #900;
  font-weight: bold;
  font-size: 38px;
}

</style>

<script type="text/javascript" src="local:///chrome/webworks.js"></script>
<script type="text/javascript">
var VKLayout = ['DEFAULT','URL','EMAIL','WEB','NUM_PUNC','SYMBOL','PHONE','PIN','PASSWORD','DIAL_PAD'];
var VKEnter = ['DEFAULT','GO','JOIN','NEXT','SEARCH','SEND','SUBMIT','DONE','CONNECT'];	
var layout = 0;
var enter = 0;
var dpr = false;
var rippleLoaded = false;

if(typeof window.devicePixelRatio != 'undefined') // Does device support devicePixelRatio?
	{
	dpr = window.devicePixelRatio;
	}

var meta = document.createElement("meta");
meta.setAttribute('name','viewport');
if(dpr) // Set up the right meta
	{
	meta.setAttribute('content','initial-scale='+ (1/window.devicePixelRatio) + ',user-scalable=no');
	document.getElementsByTagName('head')[0].appendChild(meta); // Inject meta
	}

document.addEventListener('webworksready', function(e) {
	// This is a hack for Ripple calling webworksready multiple times
	if (rippleLoaded) return;
	rippleLoaded = true;
	
	if (community.VKeyboard) {
		for(i=1; i<=6; i++) {
			document.getElementById('ip' + i).disabled = false;
			}
		var realkb = "Touch Only Device";
		if(community.VKeyboard.VKhasPhysicalKeyboard()) {
			realkb = "Physical Keyboard";
			}
		var div = document.getElementById('kbpresent');
		div.innerHTML = realkb;
		showkblayout();
		showkbenter();
		}
	});
	
function showkblayout() {
	var div = document.getElementById('kblayout');
	div.innerHTML = 'Layout = ' + VKLayout[layout];
	}
	
function showkbenter() {
	var div = document.getElementById('kbenter');
	div.innerHTML = 'Enter = ' + VKEnter[enter];
	}
	
function showkbheight() {
	var div = document.getElementById('kbheight');
	div.innerHTML = 'Keyboard Height = ' + community.VKeyboard.VKgetHeight();
	}
	
function setkblayout() {
	community.VKeyboard.VKsetLayout(layout, enter);
	}
	
function changelayout(delta) {
	layout += delta;
	if(layout < 0) {
		layout = VKLayout.length - 1;
		}
	if(layout >= VKLayout.length) {
		layout = 0;
		}
	setkblayout();
	showkblayout();
	}
	
function changeenter(delta) {
	enter += delta;
	if(enter < 0) {
		enter = VKEnter.length - 1;
		}
	if(enter >= VKEnter.length) {
		enter = 0;
		}
	setkblayout();
	showkbenter();
	}
	
</script>  

</head>
<body style="margin: auto; height: 100%;">

<input id='ip1' disabled type="button" value="-" onclick="changelayout(-1);" />
<span id="kblayout"></span>
<input id='ip2' disabled type="button" value="+" onclick="changelayout(+1);" />
<br /><br />
<input id='ip3' disabled type="button" value="-" onclick="changeenter(-1);" />
<span id="kbenter"></span>
<input id='ip4' disabled type="button" value="+" onclick="changeenter(+1);" />
<br /><br />
<input id='ip5' disabled type="button" value="Hide" onclick="community.VKeyboard.VKhide();" />
<span id="kbheight">Kbd Height = 0</span>
<input id='ip6' disabled type="button" value="Show" onclick="community.VKeyboard.VKshow(); showkbheight();" />
<br /><br />
Text Input : <input type="text" />
<br /><br />
<span id="kbpresent"></span>

</body>
</html>